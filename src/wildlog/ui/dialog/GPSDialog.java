package wildlog.ui.dialog;

import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import javax.swing.JComponent;
import javax.swing.JDialog;
import javax.swing.KeyStroke;
import wildlog.data.enums.Latitudes;
import wildlog.data.enums.Longitudes;


public class GPSDialog extends JDialog {

    /** Creates new form GPSDialog */
    public GPSDialog(java.awt.Frame parent, boolean modal) {
        super(parent, modal);
        // Need to set a few settings onthe content pane before continuing (for example size, background color, etc.)
        getContentPane().setPreferredSize(new Dimension(410, 210));
        // Setup the escape key
        // TODO: Maybe move this into a util method that can apply it to any dialog (or similar component)
        final JDialog thisHandler = this;
        getRootPane().registerKeyboardAction(
                new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
        //                thisHandler.setSelectionMade(false);
                        thisHandler.dispose();
                    }
                },
                KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE, 0), JComponent.WHEN_IN_FOCUSED_WINDOW);
        // Initialize the auto generated code
        initComponents();
        // TODO: Use DB defaults to set the initial lat/lon
        tglSouth.setSelected(true);
        tglEast.setSelected(true);
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jButton1 = new javax.swing.JButton();
        jButton2 = new javax.swing.JButton();
        jButton3 = new javax.swing.JButton();
        jButton4 = new javax.swing.JButton();
        btnSave = new javax.swing.JButton();
        jLabel1 = new javax.swing.JLabel();
        tglNorth = new javax.swing.JToggleButton();
        tglSouth = new javax.swing.JToggleButton();
        jLabel2 = new javax.swing.JLabel();
        tglWest = new javax.swing.JToggleButton();
        tglEast = new javax.swing.JToggleButton();
        tglDecimalDegrees = new javax.swing.JToggleButton();
        tglDecimalMinutes = new javax.swing.JToggleButton();
        tglDecimalSeconds = new javax.swing.JToggleButton();
        spnLatInteger1 = new javax.swing.JSpinner();
        spnLatInteger2 = new javax.swing.JSpinner();
        spnLatDecimal = new javax.swing.JSpinner();
        spnLonInteger1 = new javax.swing.JSpinner();
        spnLonInteger2 = new javax.swing.JSpinner();
        spnLonDecimal = new javax.swing.JSpinner();
        jSeparator1 = new javax.swing.JSeparator();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        org.jdesktop.application.ResourceMap resourceMap = org.jdesktop.application.Application.getInstance(wildlog.WildLogApp.class).getContext().getResourceMap(GPSDialog.class);
        setTitle(resourceMap.getString("Form.title")); // NOI18N
        setMinimumSize(new java.awt.Dimension(410, 210));
        setName("Form"); // NOI18N
        setResizable(false);
        getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jButton1.setText(resourceMap.getString("jButton1.text")); // NOI18N
        jButton1.setFocusPainted(false);
        jButton1.setName("jButton1"); // NOI18N
        getContentPane().add(jButton1, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 11, 120, 30));

        jButton2.setIcon(resourceMap.getIcon("jButton2.icon")); // NOI18N
        jButton2.setText(resourceMap.getString("jButton2.text")); // NOI18N
        jButton2.setToolTipText(resourceMap.getString("jButton2.toolTipText")); // NOI18N
        jButton2.setFocusPainted(false);
        jButton2.setMargin(new java.awt.Insets(2, 6, 2, 6));
        jButton2.setName("jButton2"); // NOI18N
        getContentPane().add(jButton2, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 50, 120, 30));

        jButton3.setIcon(resourceMap.getIcon("jButton3.icon")); // NOI18N
        jButton3.setText(resourceMap.getString("jButton3.text")); // NOI18N
        jButton3.setFocusPainted(false);
        jButton3.setName("jButton3"); // NOI18N
        getContentPane().add(jButton3, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 10, 120, 30));

        jButton4.setIcon(resourceMap.getIcon("jButton4.icon")); // NOI18N
        jButton4.setText(resourceMap.getString("jButton4.text")); // NOI18N
        jButton4.setFocusPainted(false);
        jButton4.setMargin(new java.awt.Insets(2, 6, 2, 6));
        jButton4.setName("jButton4"); // NOI18N
        getContentPane().add(jButton4, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 50, 120, 30));

        btnSave.setIcon(resourceMap.getIcon("btnSave.icon")); // NOI18N
        btnSave.setText(resourceMap.getString("btnSave.text")); // NOI18N
        btnSave.setFocusPainted(false);
        btnSave.setName("btnSave"); // NOI18N
        btnSave.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnSaveActionPerformed(evt);
            }
        });
        getContentPane().add(btnSave, new org.netbeans.lib.awtextra.AbsoluteConstraints(270, 10, 130, 70));

        jLabel1.setFont(resourceMap.getFont("jLabel2.font")); // NOI18N
        jLabel1.setText(resourceMap.getString("jLabel1.text")); // NOI18N
        jLabel1.setName("jLabel1"); // NOI18N
        getContentPane().add(jLabel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 90, -1, -1));

        tglNorth.setText(Latitudes.NORTH.getText());
        tglNorth.setFocusPainted(false);
        tglNorth.setMargin(new java.awt.Insets(2, 2, 2, 2));
        tglNorth.setName("tglNorth"); // NOI18N
        tglNorth.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                tglNorthActionPerformed(evt);
            }
        });
        getContentPane().add(tglNorth, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 110, 60, 30));

        tglSouth.setText(Latitudes.SOUTH.getText());
        tglSouth.setFocusPainted(false);
        tglSouth.setMargin(new java.awt.Insets(2, 2, 2, 2));
        tglSouth.setName("tglSouth"); // NOI18N
        tglSouth.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                tglSouthActionPerformed(evt);
            }
        });
        getContentPane().add(tglSouth, new org.netbeans.lib.awtextra.AbsoluteConstraints(70, 110, 60, 30));

        jLabel2.setFont(resourceMap.getFont("jLabel2.font")); // NOI18N
        jLabel2.setText(resourceMap.getString("jLabel2.text")); // NOI18N
        jLabel2.setName("jLabel2"); // NOI18N
        getContentPane().add(jLabel2, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 150, -1, -1));

        tglWest.setText(Longitudes.WEST.getText());
        tglWest.setFocusPainted(false);
        tglWest.setMargin(new java.awt.Insets(2, 2, 2, 2));
        tglWest.setName("tglWest"); // NOI18N
        tglWest.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                tglWestActionPerformed(evt);
            }
        });
        getContentPane().add(tglWest, new org.netbeans.lib.awtextra.AbsoluteConstraints(70, 170, 60, 30));

        tglEast.setText(Longitudes.EAST.getText());
        tglEast.setFocusPainted(false);
        tglEast.setMargin(new java.awt.Insets(2, 2, 2, 2));
        tglEast.setName("tglEast"); // NOI18N
        tglEast.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                tglEastActionPerformed(evt);
            }
        });
        getContentPane().add(tglEast, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 170, 60, 30));

        tglDecimalDegrees.setText(resourceMap.getString("tglDecimalDegrees.text")); // NOI18N
        tglDecimalDegrees.setToolTipText(resourceMap.getString("tglDecimalDegrees.toolTipText")); // NOI18N
        tglDecimalDegrees.setFocusPainted(false);
        tglDecimalDegrees.setName("tglDecimalDegrees"); // NOI18N
        tglDecimalDegrees.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                tglDecimalDegreesActionPerformed(evt);
            }
        });
        getContentPane().add(tglDecimalDegrees, new org.netbeans.lib.awtextra.AbsoluteConstraints(340, 170, 60, 30));

        tglDecimalMinutes.setText(resourceMap.getString("tglDecimalMinutes.text")); // NOI18N
        tglDecimalMinutes.setToolTipText(resourceMap.getString("tglDecimalMinutes.toolTipText")); // NOI18N
        tglDecimalMinutes.setFocusPainted(false);
        tglDecimalMinutes.setName("tglDecimalMinutes"); // NOI18N
        tglDecimalMinutes.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                tglDecimalMinutesActionPerformed(evt);
            }
        });
        getContentPane().add(tglDecimalMinutes, new org.netbeans.lib.awtextra.AbsoluteConstraints(340, 140, 60, 30));

        tglDecimalSeconds.setSelected(true);
        tglDecimalSeconds.setText(resourceMap.getString("tglDecimalSeconds.text")); // NOI18N
        tglDecimalSeconds.setToolTipText(resourceMap.getString("tglDecimalSeconds.toolTipText")); // NOI18N
        tglDecimalSeconds.setFocusPainted(false);
        tglDecimalSeconds.setName("tglDecimalSeconds"); // NOI18N
        tglDecimalSeconds.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                tglDecimalSecondsActionPerformed(evt);
            }
        });
        getContentPane().add(tglDecimalSeconds, new org.netbeans.lib.awtextra.AbsoluteConstraints(340, 110, 60, 30));

        spnLatInteger1.setFont(resourceMap.getFont("spnLonDecimal.font")); // NOI18N
        spnLatInteger1.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        spnLatInteger1.setName("spnLatInteger1"); // NOI18N
        getContentPane().add(spnLatInteger1, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 110, 50, 30));

        spnLatInteger2.setFont(resourceMap.getFont("spnLonDecimal.font")); // NOI18N
        spnLatInteger2.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        spnLatInteger2.setName("spnLatInteger2"); // NOI18N
        getContentPane().add(spnLatInteger2, new org.netbeans.lib.awtextra.AbsoluteConstraints(200, 110, 50, 30));

        spnLatDecimal.setFont(resourceMap.getFont("spnLonDecimal.font")); // NOI18N
        spnLatDecimal.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        spnLatDecimal.setName("spnLatDecimal"); // NOI18N
        getContentPane().add(spnLatDecimal, new org.netbeans.lib.awtextra.AbsoluteConstraints(260, 110, 70, 30));

        spnLonInteger1.setFont(resourceMap.getFont("spnLonDecimal.font")); // NOI18N
        spnLonInteger1.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        spnLonInteger1.setName("spnLonInteger1"); // NOI18N
        getContentPane().add(spnLonInteger1, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 170, 50, 30));

        spnLonInteger2.setFont(resourceMap.getFont("spnLonDecimal.font")); // NOI18N
        spnLonInteger2.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        spnLonInteger2.setName("spnLonInteger2"); // NOI18N
        getContentPane().add(spnLonInteger2, new org.netbeans.lib.awtextra.AbsoluteConstraints(200, 170, 50, 30));

        spnLonDecimal.setFont(resourceMap.getFont("spnLonDecimal.font")); // NOI18N
        spnLonDecimal.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        spnLonDecimal.setName("spnLonDecimal"); // NOI18N
        getContentPane().add(spnLonDecimal, new org.netbeans.lib.awtextra.AbsoluteConstraints(260, 170, 70, 30));

        jSeparator1.setName("jSeparator1"); // NOI18N
        getContentPane().add(jSeparator1, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 85, 390, -1));

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void btnSaveActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnSaveActionPerformed
        dispose();
    }//GEN-LAST:event_btnSaveActionPerformed

    private void tglNorthActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_tglNorthActionPerformed
        tglSouth.setSelected(!tglNorth.isSelected());
    }//GEN-LAST:event_tglNorthActionPerformed

    private void tglSouthActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_tglSouthActionPerformed
        tglNorth.setSelected(!tglSouth.isSelected());
    }//GEN-LAST:event_tglSouthActionPerformed

    private void tglWestActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_tglWestActionPerformed
        tglEast.setSelected(!tglWest.isSelected());
    }//GEN-LAST:event_tglWestActionPerformed

    private void tglEastActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_tglEastActionPerformed
        tglWest.setSelected(!tglEast.isSelected());
    }//GEN-LAST:event_tglEastActionPerformed

    private void tglDecimalDegreesActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_tglDecimalDegreesActionPerformed
        if (tglDecimalDegrees.isSelected()) {
            tglDecimalMinutes.setSelected(!tglDecimalDegrees.isSelected());
            tglDecimalSeconds.setSelected(!tglDecimalDegrees.isSelected());
            setupDecimalDegrees();
        }
        else {
            setupDecimalSeconds();
        }
    }//GEN-LAST:event_tglDecimalDegreesActionPerformed

    private void tglDecimalMinutesActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_tglDecimalMinutesActionPerformed
        if (tglDecimalMinutes.isSelected()) {
            tglDecimalDegrees.setSelected(!tglDecimalMinutes.isSelected());
            tglDecimalSeconds.setSelected(!tglDecimalMinutes.isSelected());
            setupDecimalMinutes();
        }
        else {
            setupDecimalSeconds();
        }
    }//GEN-LAST:event_tglDecimalMinutesActionPerformed

    private void tglDecimalSecondsActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_tglDecimalSecondsActionPerformed
        if (tglDecimalSeconds.isSelected()) {
            tglDecimalDegrees.setSelected(!tglDecimalSeconds.isSelected());
            tglDecimalMinutes.setSelected(!tglDecimalSeconds.isSelected());
            setupDecimalSeconds();
        }
        else {
            tglDecimalSeconds.setSelected(true);
            setupDecimalSeconds();
        }
    }//GEN-LAST:event_tglDecimalSecondsActionPerformed

    private void setupDecimalDegrees() {
        // Update UI
        // FIXME: Is this really the correct way of doing it, to re-add the same componenent but with different constraints?
        getContentPane().add(spnLatDecimal, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 110, 190, 30));
        spnLatInteger1.setVisible(false);
        spnLatInteger2.setVisible(false);
        spnLatDecimal.setVisible(true);
        getContentPane().add(spnLonDecimal, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 170, 190, 30));
        spnLonInteger1.setVisible(false);
        spnLonInteger2.setVisible(false);
        spnLonDecimal.setVisible(true);
    }

    private void setupDecimalMinutes() {
        // Update UI
        getContentPane().add(spnLatDecimal, new org.netbeans.lib.awtextra.AbsoluteConstraints(210, 110, 120, 30));
        getContentPane().add(spnLatInteger2, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 110, 60, 30));
        spnLatInteger1.setVisible(false);
        spnLatInteger2.setVisible(true);
        spnLatDecimal.setVisible(true);
        getContentPane().add(spnLonDecimal, new org.netbeans.lib.awtextra.AbsoluteConstraints(210, 170, 120, 30));
        getContentPane().add(spnLonInteger2, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 170, 60, 30));
        spnLonInteger1.setVisible(false);
        spnLonInteger2.setVisible(true);
        spnLonDecimal.setVisible(true);
    }

    private void setupDecimalSeconds() {
        // Update UI
        getContentPane().add(spnLatDecimal, new org.netbeans.lib.awtextra.AbsoluteConstraints(260, 110, 70, 30));
        getContentPane().add(spnLatInteger2, new org.netbeans.lib.awtextra.AbsoluteConstraints(200, 110, 50, 30));
        spnLatInteger1.setVisible(true);
        spnLatInteger2.setVisible(true);
        spnLatDecimal.setVisible(true);
        getContentPane().add(spnLonDecimal, new org.netbeans.lib.awtextra.AbsoluteConstraints(260, 170, 70, 30));
        getContentPane().add(spnLonInteger2, new org.netbeans.lib.awtextra.AbsoluteConstraints(200, 170, 50, 30));
        spnLonInteger1.setVisible(true);
        spnLonInteger2.setVisible(true);
        spnLonDecimal.setVisible(true);
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnSave;
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JButton jButton3;
    private javax.swing.JButton jButton4;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JSeparator jSeparator1;
    private javax.swing.JSpinner spnLatDecimal;
    private javax.swing.JSpinner spnLatInteger1;
    private javax.swing.JSpinner spnLatInteger2;
    private javax.swing.JSpinner spnLonDecimal;
    private javax.swing.JSpinner spnLonInteger1;
    private javax.swing.JSpinner spnLonInteger2;
    private javax.swing.JToggleButton tglDecimalDegrees;
    private javax.swing.JToggleButton tglDecimalMinutes;
    private javax.swing.JToggleButton tglDecimalSeconds;
    private javax.swing.JToggleButton tglEast;
    private javax.swing.JToggleButton tglNorth;
    private javax.swing.JToggleButton tglSouth;
    private javax.swing.JToggleButton tglWest;
    // End of variables declaration//GEN-END:variables
}
